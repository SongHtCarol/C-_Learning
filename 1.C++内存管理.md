# 三种内存分配

变量的存储类型 **(storage class)** 是指存储变量值的内存类型。变量的存储类型决定变量何时创建、何时销毁以及它的值将保存多久等。

- **静态存储区**
    在编译时给分配固定的内存空间，`在执行时赋值`。
    `static/extern`关键字修饰的变量被分配在静态存储区，代码也存在静态存储区，程序结束后由系统释放。`extern修饰的变量就是所说的全局变量`。
    `static`关键字：
    当它用于函数定义或者用于代码块之外的变量生命时，`static`关键字用于修改标识符的连接属性，从`external`改为`internal`，但标识符的存储类型和作用域不受影响。用这种方式声明的函数或变量只能在声明他们的源文件中访问。
    当它作用于代码内部的变量声明时，`static`关键字用于修改变量的存储类型，从自动变量修改为静态变量，但变量的链接属性和作用域不受影响。用这种方式声明的变量在程序执行之前创建，并在程序的整个执行期间一直存在。当所在的函数被多次调用时，`static`类型的变量从第二次起不会被初始化。
    `static`表示的是静态的。类的静态成员函数、静态成员变量是和类相关的，而不是和类的具体对象相关的。即使没有具体对象，也能调用类的静态成员函数和成员变量。
    `static`静态成员变量不能在类的内部初始化。在类的内部只是声明，定义必须在类定义体的外部。
    `static`成员函数主要目的是作为类作用域的全局函数。不能访问类的非静态数据成员。类的静态成员函数没有`this`指针，这导致：
        1、不能直接存取类的非静态成员变量，调用非静态成员函数
        2、不能被声明为`virtual`

- **栈：动态存储区**
    在运行时分配固定的内存空间。
    虽然分配是在程序运行时进行的,但是分配的大小多少是确定的,不变的,而这个"大小多少"是在编译时确定的,不是在运行时.

- **堆：动态存储区**
    在运行时分配可变的内存空间，由操作系统完成。
    由于从操作系统管理的内存分配,所以在分配和销毁时都要占用时间，因此用堆的效率非常低。但是堆的优点在于,编译器不必知道要从堆里分配多少存储空间，也不必知道存储的数据要在堆里停留多长的时间。多态变量所需的存储空间只有在运行时创建了对象之后才能确定。在C++中，要求创建一个对象时，只需用new命令编制相关的代码即可。

    **关于alloc ：**
    ```C
    calloc() 
    void* calloc (size_t num, size_t size);
    函数用来动态地分配内存空间并初始化为 0
    ```
